<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>

<script type="text/javascript">
//----------------------------------------------------------
// 4. 지역변수를 참조하는 함수 안에 함수 클로저(closure)		
//			전역변수는 특정 함수 몇 개만 공유하지 못하고 전체가 공유하는 변수이다.
//			클로저는 특정 함수가 암묵적으로 다른 함수의 참조를 가지고 있기 때문에
//			호출되는 함수가 참조하는 함수의 메모리 공간을 참조한다. (?)
//			아무튼 클로저를 이용하여 전역변수의 사용을 줄일 수 있다

/*  콜백함수란? 함수가 다른 함수의 파라메터로 전달되는 함수
		 			콜백함수는 함수가 실행되는 중간에 호출되어 상태 정보를 저장하거나 결과 값을 처리할 때 사용
 */
 
 //------ 함수 선언
function add(a,b,c){
	var result = a + b;			//여기서 var 을 없애면 지역변수가 아닌 글로벌 변수가 됨 -> 고로 다른 곳에서도 result 값을 쉽게 변경해버림
	c(result);
	return function(){
				result++;
				return '공유결과?' + result;
			};
}
		
//------ 함수 호출
var resultVar = add(10,20,function(res){
							document.write('결과:' + res + '<br/>');
							}); 
document.write('리턴결과 : ' + resultVar()  + '<hr/>');
document.write('리턴결과 : ' + resultVar()  + '<hr/>');
document.write('리턴결과 : ' + resultVar()  + '<hr/>');
result = 1000000;
document.write('리턴결과2 : ' + resultVar  + '<hr/>');


		

		
		
</script>
</head>
<body>

</body>
</html>